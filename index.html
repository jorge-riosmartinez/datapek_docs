<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Usuario - Datapek</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Manual de Usuario - Datapek</h1>
        <p>Proyecto con Raspberry Pi para monitorear movimientos de caninos</p>
    </header>

    <nav id="sidebar" class="sidebar">
        <button id="menuToggle" class="menu-toggle">☰</button>
        <ul>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/index.html">Bienvenida</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/introduccion.html">Introducción</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/requisitos-del-sistema.html">Requisitos del Sistema</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/instalacion-del-hardware.html">Instalación del Hardware</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/configuracion-del-software.html">Configuración del Software</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/uso-de-los-sensores-y-perifericos.html">Uso de los Sensores y Periféricos</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/integracion-y-proyectos-ejemplares.html">Integración y Proyectos Ejemplares</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/solucion-de-problemas.html">Solución de Problemas</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/mantenimiento-y-seguridad.html">Mantenimiento y Seguridad</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/apendices.html">Apéndices</a></li>
            <li><a href="https://jorge-riosmartinez.github.io/datapek_docs/secciones/licencia-y-creditos.html">Licencia y Créditos</a></li>
        </ul>
    </nav>

    <main>
        <section id="introduccion">
            <h2><center>¿Qué es Datapek?</center></h2>
            <p>Datapek es un proyecto de CarlimpCorp en el que se busca monitorear diferentes acciones de los caninos por medio de sensores conectados a una Raspberry Pi Zero, esta se encarga de recolectar diversos datos como la temperatura corporal, el movimiento de la cola, los sonidos que produce y los movimientos que realiza.</p>

            <h2><center>¿Cómo se ve Datapek?</center></h2>
            <p>Actualmente Datapek cuenta con un modelo, mismo que se muestra a continuación:</p>
            <img src="assets/fotos/frente.jpeg" height="500" alt="Datapek visto de frente">
            <img src="assets/fotos/arriba.jpeg" height="500" alt="Datapek visto desde arriba">
            <img src="assets/fotos/derecha.jpeg" height="500" alt="Datapek visto desde la derecha">
            <img src="assets/fotos/izquierda.jpeg" height="500" alt="Datapek visto desde la izquierda">
        </section>

        <section>
            <h2><center>Primeros pasos con Datapek</center></h2>
            <p>

            </p>
        </section>


        <section id="instalacion">
            <h2>Instalación del Firmware</h2>
            <p>Sigue estos pasos para instalar y configurar el firmware en tu Raspberry Pi:</p>
            
            <h3>Preparación de la Tarjeta SD</h3>
            <ol>
                <li><strong>Grabar la imagen del sistema operativo:</strong>
                    <ul>
                        <li>Descargue y abra el <a href="https://www.raspberrypi.com/software/" target="_blank">Raspberry Pi Imager</a> en su computadora personal.</li>
                        <li>Dentro del programa Raspberry Pi imager presione la combinación de teclas <code>CTRL + SHIFT + X</code> de modo que se desplegará una nueva ventana llamada "Personalizacíon del SO"</li>
                        <center><img src="assets/capturas/rpi-imager-personalizacion-del-so.png" height="500" alt="Menú Personalización del SO dentro RPI imager"></center>
                        <li>Ingrese todos los datos tal como se muestran en la imágen superior, excepto los ajustes regionales, puede usar la contraseña que usted desee, se sugiere usar la contraseña <code>datapek2024</code> tanto para usuario como para SSID.</li>
                        <li>Seleccione la pestaña "Servicios" dentro de la ventana activa y asegurese de tener activas las casillas de "Activar SSH" y "Usar autenticación por contraseña". Una vez hecho seleccione el botón guardar.</li>
                        <center><img src="assets/capturas/rpi-imager-ssh.png" height="500" alt="Habilitar SSH mediante la personalización del SO dentro RPI imager"></center>
                        <li>Seleccione el dispositivo "Raspberry Pi Zero" y grabe la imagen en una tarjeta SD.</li>
                        <li>Seleccione el sistema operativo "Raspberry Pi OS (Legacy, 32-bit): A port of Debian Bullseye with security updates and desktop environment".</li>
                        <li>Ingrese su tarjeta micro SD y en la tercera opción, seleccione su tarjeta micro SD para grabar la imagen en dicha tarjeta, tome en cuenta que los datos que tenía esta micro SD se borrarán, se aconseja hacer un respaldo de los mismos.</li>
                    </ul>
                </li>
                <li><strong>Descargar Termux:</strong></li>
                <ul>
                    <li>Descargue e instale la aplicación <a href="https://play.google.com/store/apps/details?id=com.termux" target="_blank">Termux</a> desde Google Play Store.</li>
                    <li>Abra Termux y actualice los paquetes con los siguientes comandos:</li>
                    <pre><code>pkg update && pkg upgrade</code></pre>
                    <li>Instale el paquete de OpenSSH:</li>
                    <pre><code>pkg install openssh</code></pre>
                </ul>
                <li><strong>Conexión SSH:</strong>
                    <ul>
                        <li>Desde su teléfono celular abra la configuración, seleccione Redes móviles > Zona Wi-Fi personal y cambie el nombre del dispositvo a <code>wifi_datapek</code> y la contraseña a <code>datapek2024</code>. Una vez hecho encienda su Zona Wi-Fi personal. Luego innserte la tarjeta SD en su Raspberry Pi Zero y enciéndala.</li>
                        <li>Busque la dirección IP de su Raspberry Pi Zero en su red, en algunos teléfonos móviles puede consultar los dispositivos conectados a su zona Wi-Fi personal, en caso contrario descargue la aplicación Fing (disponibles desde Play Store y AppStore) en otro dispositivo y conéctese a la zona móvil para conocer la dirección IP de su Raspberry Pi Zero.</li>
                        <li>Una vez que sepa la dirección IP de su Raspberry PI Zero, conéctese por SSH desde Termux ingresando el siguiente comando</li>
                        <center><code>ssh datapek@[IP DE LA RASPBERRY] <p>sustituyendo [IP DE LA RASPBERRY] por la IP que encontró previamente.</p></code></center>
                    </ul>
                    <p>Una vez dentro de la Raspberry Pi Zero, es necesario actualizar los paquetes, para ello usaremos el comando <code>sudo apt update && sudo apt upgrade -y</code></p>
                </li>
            </ol>
        </br>

            <center><h1>Configuración de Virtual Network Computing (VNC)</h1></center>
            <p>Primero tenemos que saber para que querríamos activar esta opción, esta opción nos permite el acceso remoto a la interfaz gráfica de usuario (GUI) de la Raspberry Pi desde otra computadora. Esto es útil para controlar la Raspberry Pi sin necesidad de conectar un monitor, teclado y ratón directamente </p>

            <h2>1. Instalar RealVNC</h2>
            <p>Use el siguiente comando desde su Raspberry Pi Zero para descargar RealVNC: <pre><code>sudo apt-get install realvnc-vnc-server</code></pre></p>

            <h2>2. Activar VNC desde raspi-config</h2>
            <p>Ingrese el comando: </p><pre><code>sudo raspi-config</code></pre>
            <p>Debe poder ver una pantalla como la siguiente: </p>
            <center><img src="assets/capturas/raspi-config.png" height="400" alt="menú de sudo raspi-config"></center>
            <p>Navegue a <strong>Interfacing Options</strong> -> <strong>VNC</strong> y selecciona <strong>Enable</strong>.</p>
            <p>Sin salir del menú de configuración de la Raspberry Pi, navegue a System Options -> Boot / Auto Login -> Desktop / CLI y seleccione la opción <b>B4 Desktop GUI, automatically logged in as 'datapek' user.</b></p>


            <h2>3. Reiniciar el servicio VNC</h2>
            <p>Asegúrese de que el servicio VNC está corriendo con los siguientes comandos:</p>
            <pre><code>sudo systemctl start vncserver-x11-serviced.service</code></pre>
            <pre><code>sudo systemctl enable vncserver-x11-serviced.service</code></pre>

            <h2>4. Conectar al VNC Server</h2>
            <p>Desde su computadora, use un cliente VNC (como RealVNC Viewer) para conectarse a la dirección IP de tu Raspberry Pi.</p>
            <p>Abra RealVNC Viewer e introduzca la dirección IP de su Raspberry Pi para conectarse.</p>
            <p>Ingrese el usuario y contraseña que configuró para conectarse por SSH y presione el botón continuar.</p>
            <p>Reinicie y debe ser capaz de visualizar un escritorio como el siguiente: </p>
            <center><img src="assets/capturas/rasp.png" height="500" alt="Escritorio de Raspberry en modo Headless por medio de VNC"></center>

        <center><h1>Habilitar opciones necesarias</h1></center>

            <p>Abra el menú de Configuración con el comando:</p>
            <pre><code>sudo raspi-config</code></pre>
            <p>Navegue a interface options y habilite las siguientes opciones:</p>
            <ul>
                <li>Legacy camera</li>
                <li>i2c</li>
                <li>1wire</li>
            </ul>
            <p>Reinicie su Raspberry con:</p>
            <pre><code>sudo reboot</code></pre>

            <center><h1>Obtener scripts</h1></center>
            <p>Reconéctese a la Raspberry Pi y clone el repositorio de Datapek:</p>
            <pre><code>git clone https://github.com/jorge-riosmartinez/datapek_docs.git</code></pre>

            <center><h1>Diagnóstico</h1></center>
            <p>Ejecutar el diagnóstico que permite conocer el funcionamiento de los sensores:</p>
            <ul>
                <li>Temperatura</li>
                <li>IMU</li>
                <li>LEDs</li>
            </ul>
            <p>Esto lo puede hacer entrando al repositorio que recién clonó de Datapek y ejecutando el script diagnostico.py con los siguientes comandos:</p>
            <pre><code>cd datapek_docs</code></pre>
            <pre><code>python firmware/utils/diagnostico.py</code></pre>

            <center><h3>Uso de su Datapek configurado</h3></center>
            <p>Para iniciar la recolección de datos, es necesario usar el script <code>adquisicion_datos.py</code>. Dicho script toma los siguientes argumentos:</p>
            <pre><code>-n, --nombre_perro: Nombre del perro
-p, --prueba: nombre de la prueba, por ejemplo juguete
-d, --duracion: duracion de la prueba en segundos
--imu: activa la recolección de datos del IMU
--camara: activa la grabacion de video de la camara
--audio: activa la grabacion de audio del microfono
--temperatura: activa la recolección de datos del sensor ds18b20</code></pre>
            <p>Las salidas del script son:</p>
            <ul>
                <li>Carpeta con el nombre del perro</li>
                <ul>
                    <li>Carpeta con el nombre de la prueba</li>
                    <ul>
                        <li>Archivos de los sensores seleccionados</li>
                    </ul>
                </ul>
            </ul>
            
            <p>Asegúrese de conectar el sensor de temperatura a su Datapek antes de usar el script de diagnóstico.</p>
            <p>Para la ejecución del script de adquisición de datos asegúrese de encontrarse dentro del repositorio clonado de Datapek y use el siguiente comando::</p>
            <pre><code>python firmware/adquisicion_datos.py -n doug -p test -d 10 --imu --camara --audio --temperatura</code></pre>
            <p>Con este comando se creará una nueva carpeta llamada "doug" en el directorio actual, esta carpeta contendrá la carpeta test y dentro se guardarán los archivos resultantes de las pruebas de los sensores.</p>
            <p>Puede cambiar el nombre del perro y de la carpeta test.</p>
            <p>Los argumentos relacionados con los sensores (--imu --camara --audio --temperatura) son opcionales, pueden elegirse únicamente los de interés para la prueba.</p>
            <p>Finalmente, los datos obtenidos se pueden encontrar en:</p>
            <pre><code>datapek_docs/doug/test</code></pre>
        </section>






    </main>

    <footer>
        <p>&copy; 2024 CarlimpCorp. Todos los derechos reservados.</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
